"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.locking = void 0;
/**
 * Save promises for later
 */
function locking() {
    const locks = {};
    return async (key, fn) => {
        if (locks[key] != null)
            return locks[key];
        locks[key] = fn();
        fn()
            .then(() => delete locks[key], () => delete locks[key]);
        return locks[key];
    };
}
exports.locking = locking;
//# sourceMappingURL=lock.js.map